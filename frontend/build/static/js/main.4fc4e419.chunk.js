(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{21:function(e,t,a){e.exports={footerNav:"styles_footerNav__2OE4d"}},31:function(e,t,a){e.exports={notFound:"styles_notFound__22mFc",notFound_box:"styles_notFound_box__2vfwi"}},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},91:function(e,t,a){"use strict";a.r(t);var c=a(1),r=a.n(c),s=a(20),n=a.n(s),l=a(4),o=a(32),i=a(13),j=a(8),d=a(6);function b(e){var t=localStorage.getItem("timeLoggerUserToken");return t?Object(l.a)({Authorization:"Token ".concat(t)},e):Object(l.a)({},e)}function u(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:t&&11).toString(16)}))}var O=a(48),h=a.n(O).a.create({baseURL:"https://farhad.pythonanywhere.com/api"}),p="USER_LOGGED_IN",m="USER_LOGIN_ERROR",x="USER_REGISTERED",g="USER_REGISTER_ERROR",f="USER_LOGGED_OUT",y="AUTH_LOADING",N="TIME_LOGS_LOADED",v="TIME_LOGS_LOAD_ERROR",E="TIME_LOGS_LOADING",_="TIME_LOG_SAVED",w="TIME_LOG_SAVE_ERROR",S="TIME_LOG_LOADED",L="TIME_LOG_LOAD_ERROR",U="TIME_LOG_LOADING",P="LOG_REPORT_LOADING",R="LOG_REPORT_LOADED",C="LOG_REPORT_LOAD_ERROR",D="USERS_LOADING",T="USERS_LOADED",k="USER_PROFILE_LOADING",I="USER_PROFILE_INFORMATION_LOADED",A="USER_PROFILE_UPDATED",Y="USER_PROFILE_UPDATE_ERROR",M="USER_PASSWORD_UPDATED",F="USER_PASSWORD_UPDATE_ERROR",G="COMPANY_DATA_LOADING",W="COMPANY_DATA_LOADED",z="COMPANY_DATA_LOAD_ERROR",B=function(){return function(e){e({type:y,payload:!0}),h.get("/auth/user/me/",{headers:b()}).then((function(t){e({type:y,payload:!1}),e({type:p,payload:t.data})})).catch((function(t){localStorage.removeItem("timeLoggerUserToken"),e({type:f}),e({type:y,payload:!1})}))}},H=a(9),J=a(92),V=a(93),q=a(94),K=a(95),Q=a(96),X=a(97),Z=a(21),$=a.n(Z),ee=a(0),te=function(){return Object(ee.jsx)(ee.Fragment,{children:Object(ee.jsx)("footer",{className:"py-5",children:Object(ee.jsx)(J.a,{children:Object(ee.jsxs)(V.a,{className:"align-items-center justify-content-xl-between",children:[Object(ee.jsx)(q.a,{xl:"6",children:Object(ee.jsxs)("div",{className:"copyright text-center text-xl-left text-muted",children:["\xa9 ",(new Date).getFullYear()," ",Object(ee.jsx)(H.b,{className:"font-weight-bold ml-1",to:"/",children:"Akkrual"})]})}),Object(ee.jsx)(q.a,{xl:"6",children:Object(ee.jsxs)(K.a,{className:"nav-footer justify-content-center justify-content-xl-end",children:[Object(ee.jsx)(Q.a,{children:Object(ee.jsx)(X.a,{to:"/",className:$.a.footerNav,children:"Home"})}),Object(ee.jsx)(Q.a,{children:Object(ee.jsx)(X.a,{to:"/about",className:$.a.footerNav,children:"About Us"})})]})})]})})})})},ae=a(98),ce=a(99),re=a(110),se="Time Logger",ne=function(e){var t=Object(d.c)((function(e){return e.auth}));return Object(ee.jsx)(ae.a,{color:"primary",dark:!0,expand:"md",children:Object(ee.jsxs)(J.a,{fluid:!0,children:[Object(ee.jsx)(ce.a,{to:"/",exact:!0,tag:H.c,children:se}),Object(ee.jsx)("button",{className:"navbar-toggler",id:"navbar-collapse-main",children:Object(ee.jsx)("span",{className:"navbar-toggler-icon"})}),Object(ee.jsxs)(re.a,{navbar:!0,toggler:"#navbar-collapse-main",children:[Object(ee.jsx)("div",{className:"navbar-collapse-header d-md-none",children:Object(ee.jsxs)(V.a,{children:[Object(ee.jsx)(q.a,{className:"collapse-brand",xs:"6",children:Object(ee.jsx)(X.a,{to:"/",children:se})}),Object(ee.jsx)(q.a,{className:"collapse-close",xs:"6",children:Object(ee.jsxs)("button",{className:"navbar-toggler",id:"navbar-collapse-main",children:[Object(ee.jsx)("span",{}),Object(ee.jsx)("span",{})]})})]})}),Object(ee.jsx)(K.a,{className:"ml-auto",navbar:!0,children:t.isAuthenticated?Object(ee.jsxs)(ee.Fragment,{children:[t.user.is_company_owner?Object(ee.jsx)(Q.a,{children:Object(ee.jsxs)(X.a,{to:"/report",tag:H.c,children:[Object(ee.jsx)("i",{className:"fa fa-file"})," Report"]})}):Object(ee.jsx)(Q.a,{children:Object(ee.jsxs)(X.a,{to:"/create-log",tag:H.c,children:[Object(ee.jsx)("i",{className:"fa fa-clock"})," Create Log"]})}),Object(ee.jsx)(Q.a,{children:Object(ee.jsxs)(X.a,{to:"/edit-profile",tag:H.c,children:[Object(ee.jsx)("i",{className:"fa fa-user"})," Profile"]})}),Object(ee.jsx)(Q.a,{children:Object(ee.jsxs)(X.a,{to:"/logout",tag:H.c,children:[Object(ee.jsx)("i",{className:"fas fa-sign-out-alt"})," Logout"]})})]}):Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)(Q.a,{children:Object(ee.jsxs)(X.a,{to:"/login",tag:H.c,children:[Object(ee.jsx)("i",{className:"fa fa-user"})," Login"]})}),Object(ee.jsx)(Q.a,{children:Object(ee.jsxs)(X.a,{to:"/register",tag:H.c,children:[Object(ee.jsx)("i",{className:"fa fa-user"})," Register"]})})]})})]})]})})},le=function(e){var t=r.a.useRef(null),a=Object(i.g)();return r.a.useEffect((function(){return document.body.classList.add("bg-default"),function(){document.body.classList.remove("bg-default")}}),[]),r.a.useEffect((function(){document.documentElement.scrollTop=0,document.scrollingElement.scrollTop=0,t.current.scrollTop=0}),[a]),Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsxs)("div",{className:"main-content",ref:t,children:[Object(ee.jsx)(ne,{}),Object(ee.jsx)("div",{className:"header bg-gradient-info py-7 py-lg-8",children:Object(ee.jsx)("div",{className:"separator separator-bottom separator-skew zindex-100",children:Object(ee.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 2560 100",x:"0",y:"0",children:Object(ee.jsx)("polygon",{className:"fill-default",points:"2560 0 2560 100 0 100"})})})}),Object(ee.jsx)(J.a,{className:"mt--8 pb-5",children:Object(ee.jsx)(V.a,{className:"justify-content-center",children:e.children})})]}),Object(ee.jsx)(te,{})]})},oe=a(100),ie=a(101),je=a(102),de=a(103),be=a(104),ue=a(105),Oe=a(49),he=a(106),pe=a(107),me=Object(i.h)((function(e){var t=e.history,a=Object(d.c)((function(e){return e.auth})),r=Object(d.b)(),s=Object(c.useState)(""),n=Object(j.a)(s,2),l=n[0],o=n[1],i=Object(c.useState)(""),b=Object(j.a)(i,2),u=b[0],O=b[1];return Object(ee.jsx)(le,{children:Object(ee.jsxs)(q.a,{lg:"5",md:"7",children:[Object(ee.jsx)(oe.a,{className:"bg-secondary shadow border-0",children:Object(ee.jsxs)(ie.a,{className:"px-lg-5 py-lg-5",children:[Object(ee.jsx)("div",{className:"text-center text-muted mb-4",children:Object(ee.jsx)("h2",{children:"Login to your account"})}),Object(ee.jsxs)(je.a,{role:"form",onSubmit:function(e){e.preventDefault(),r(function(e,t){return function(a){a({type:y,payload:!0}),a({type:m,payload:{}}),h.post("/auth/login/",e).then((function(e){localStorage.setItem("timeLoggerUserToken",e.data.token),a({type:p}),t.push("/"),a(B())})).catch((function(e){a({type:m,payload:e.response?e.response.data:{}}),a({type:y,payload:!1})}))}}({username:l,password:u},t))},children:[Object(ee.jsx)(de.a,{className:"mb-3",children:Object(ee.jsxs)(be.a,{className:"input-group-alternative",children:[Object(ee.jsx)(ue.a,{addonType:"prepend",children:Object(ee.jsx)(Oe.a,{children:Object(ee.jsx)("i",{className:"far fa-user"})})}),Object(ee.jsx)(he.a,{placeholder:"Username or Email",type:"text",value:l,onChange:function(e){return o(e.target.value)}})]})}),Object(ee.jsx)(de.a,{children:Object(ee.jsxs)(be.a,{className:"input-group-alternative",children:[Object(ee.jsx)(ue.a,{addonType:"prepend",children:Object(ee.jsx)(Oe.a,{children:Object(ee.jsx)("i",{className:"ni ni-lock-circle-open"})})}),Object(ee.jsx)(he.a,{placeholder:"Password",type:"password",value:u,onChange:function(e){return O(e.target.value)}})]})}),a.loginErrors.error&&Object(ee.jsx)("small",{style:{color:"red"},children:a.loginErrors.error}),Object(ee.jsx)("div",{className:"text-center",children:Object(ee.jsx)(pe.a,{disabled:a.loading,className:"my-4",color:"primary",type:"submit",children:a.loading?"Please wait...":"Sign In"})})]})]})}),Object(ee.jsxs)(V.a,{className:"mt-3",children:[Object(ee.jsx)(q.a,{xs:"6",children:Object(ee.jsx)(H.b,{className:"text-light",to:"/fp",children:"Forgot password?"})}),Object(ee.jsx)(q.a,{className:"text-right",xs:"6",children:Object(ee.jsx)(H.b,{className:"text-light",to:"/register",children:"Create new account"})})]})]})})})),xe=function(e){var t=e.history,a=Object(d.b)(),r=Object(d.c)((function(e){return e.auth})),s=Object(c.useState)(""),n=Object(j.a)(s,2),l=n[0],o=n[1],i=Object(c.useState)(""),b=Object(j.a)(i,2),u=b[0],O=b[1],p=Object(c.useState)(""),m=Object(j.a)(p,2),f=m[0],N=m[1],v=Object(c.useState)(""),E=Object(j.a)(v,2),_=E[0],w=E[1],S=Object(c.useState)(""),L=Object(j.a)(S,2),U=L[0],P=L[1],R=Object(c.useState)(""),C=Object(j.a)(R,2),D=C[0],T=C[1],k=Object(c.useState)(""),I=Object(j.a)(k,2),A=I[0],Y=I[1],M=Object(c.useState)(""),F=Object(j.a)(M,2),G=F[0],W=F[1];return Object(c.useEffect)((function(){r.registerErrors.non_field_errors&&W(r.registerErrors.non_field_errors[0])}),[r]),Object(ee.jsx)(le,{children:Object(ee.jsxs)(q.a,{lg:"6",md:"8",children:[Object(ee.jsx)(oe.a,{className:"bg-secondary shadow border-0",children:Object(ee.jsxs)(ie.a,{className:"px-lg-5 py-lg-5",children:[Object(ee.jsx)("div",{className:"text-center text-muted mb-4",children:Object(ee.jsx)("h2",{children:"Create a new Account"})}),Object(ee.jsxs)(je.a,{role:"form",onSubmit:function(e){e.preventDefault(),a(function(e,t){return function(a){a({type:y,payload:!0}),a({type:g,payload:{}}),h.post("/auth/register/",e).then((function(e){localStorage.setItem("timeLoggerUserToken",e.data.key),a({type:y,payload:!1}),a({type:x}),t.push("/"),a(B())})).catch((function(e){a({type:g,payload:e.response?e.response.data:{}}),a({type:y,payload:!1})}))}}({email:l,password1:u,password2:f,username:_,first_name:U,last_name:D,phone:A},t))},children:[Object(ee.jsxs)(de.a,{children:[Object(ee.jsxs)(be.a,{className:"input-group-alternative",children:[Object(ee.jsx)(ue.a,{addonType:"prepend",children:Object(ee.jsx)(Oe.a,{children:Object(ee.jsx)("i",{className:"far fa-user"})})}),Object(ee.jsx)(he.a,{placeholder:"Username",type:"text",value:_,onChange:function(e){return w(e.target.value)}})]}),r.registerErrors.username&&Object(ee.jsx)("small",{style:{color:"red"},children:r.registerErrors.username[0]})]}),Object(ee.jsxs)(de.a,{children:[Object(ee.jsxs)(be.a,{className:"input-group-alternative",children:[Object(ee.jsx)(ue.a,{addonType:"prepend",children:Object(ee.jsx)(Oe.a,{children:Object(ee.jsx)("i",{className:"ni ni-email-83"})})}),Object(ee.jsx)(he.a,{type:"email",value:l,onChange:function(e){return o(e.target.value)},placeholder:"Email",autoComplete:"new-email"})]}),r.registerErrors.email&&Object(ee.jsx)("small",{style:{color:"red"},children:r.registerErrors.email[0]})]}),Object(ee.jsxs)(de.a,{children:[Object(ee.jsxs)(be.a,{className:"input-group-alternative",children:[Object(ee.jsx)(ue.a,{addonType:"prepend",children:Object(ee.jsx)(Oe.a,{children:Object(ee.jsx)("i",{className:"ni ni-lock-circle-open"})})}),Object(ee.jsx)(he.a,{placeholder:"Password",type:"password",autoComplete:"new-password",value:u,onChange:function(e){return O(e.target.value)}})]}),r.registerErrors.password1&&Object(ee.jsx)("small",{style:{color:"red"},children:r.registerErrors.password1[0]})]}),Object(ee.jsxs)(de.a,{children:[Object(ee.jsxs)(be.a,{className:"input-group-alternative",children:[Object(ee.jsx)(ue.a,{addonType:"prepend",children:Object(ee.jsx)(Oe.a,{children:Object(ee.jsx)("i",{className:"ni ni-lock-circle-open"})})}),Object(ee.jsx)(he.a,{placeholder:"Confirm Password",type:"password",autoComplete:"new-password",value:f,onChange:function(e){return N(e.target.value)}})]}),r.registerErrors.password2&&Object(ee.jsx)("small",{style:{color:"red"},children:r.registerErrors.password2[0]})]}),Object(ee.jsxs)(de.a,{children:[Object(ee.jsxs)(be.a,{className:"input-group-alternative",children:[Object(ee.jsx)(ue.a,{addonType:"prepend",children:Object(ee.jsx)(Oe.a,{children:Object(ee.jsx)("i",{className:"far fa-user"})})}),Object(ee.jsx)(he.a,{placeholder:"First Name",type:"text",value:U,onChange:function(e){return P(e.target.value)}}),Object(ee.jsx)(he.a,{placeholder:"Last Name",type:"text",value:D,onChange:function(e){return T(e.target.value)}})]}),r.registerErrors.first_name&&Object(ee.jsx)("small",{style:{color:"red"},children:r.registerErrors.first_name[0]})]}),Object(ee.jsxs)(de.a,{children:[Object(ee.jsxs)(be.a,{className:"input-group-alternative",children:[Object(ee.jsx)(ue.a,{addonType:"prepend",children:Object(ee.jsx)(Oe.a,{children:Object(ee.jsx)("i",{className:"ni ni-mobile-button"})})}),Object(ee.jsx)(he.a,{placeholder:"Phone",type:"phone",value:A,onChange:function(e){return Y(e.target.value)}})]}),r.registerErrors.phone&&Object(ee.jsx)("small",{style:{color:"red"},children:r.registerErrors.phone[0]})]}),G&&Object(ee.jsx)("small",{style:{color:"red"},children:G}),Object(ee.jsx)("div",{className:"text-center",children:Object(ee.jsx)(pe.a,{disabled:r.loading,className:"mt-4",color:"primary",type:"submit",children:r.loading?"Please wait...":"Create account"})})]})]})}),Object(ee.jsx)(V.a,{className:"mt-3",children:Object(ee.jsx)(q.a,{className:"text-center",xs:"12",children:Object(ee.jsx)(H.b,{className:"text-light",to:"/login",children:"Already have an account? Login Here"})})})]})})},ge=function(e){return function(t){t({type:E,payload:!0}),h({method:e?"post":"get",url:"/time/logs/",data:e,headers:b()}).then((function(e){t({type:N,payload:e.data}),t({type:E,payload:!1})})).catch((function(e){console.log(e.response),t({type:v,payload:e.response?e.response.data:{message:"Something went wrong"}}),t({type:E,payload:!1})}))}},fe=a(15),ye=a.n(fe),Ne=function(){return Object(ee.jsx)("footer",{className:"footer",children:Object(ee.jsxs)(V.a,{className:"align-items-center justify-content-xl-between",children:[Object(ee.jsx)(q.a,{xl:"6",children:Object(ee.jsxs)("div",{className:"copyright text-center text-xl-left text-muted",children:["\xa9 ",(new Date).getFullYear()," ",Object(ee.jsx)(H.b,{className:"font-weight-bold ml-1",to:"/",rel:"noopener noreferrer",children:"Akkrual"})]})}),Object(ee.jsx)(q.a,{xl:"6",children:Object(ee.jsxs)(K.a,{className:"nav-footer justify-content-center justify-content-xl-end",children:[Object(ee.jsx)(Q.a,{children:Object(ee.jsx)(X.a,{className:$.a.footerNav,to:"/",rel:"noopener noreferrer",children:"Home"})}),Object(ee.jsx)(Q.a,{children:Object(ee.jsx)(X.a,{to:"/about",rel:"noopener noreferrer",className:$.a.footerNav,children:"About Us"})})]})})]})})},ve=function(e){e.props;var t=e.children,a=r.a.useRef(null),c=Object(i.g)();return r.a.useEffect((function(){document.documentElement.scrollTop=0,document.scrollingElement.scrollTop=0,a.current.scrollTop=0}),[c]),Object(ee.jsxs)("div",{className:"main-content",ref:a,children:[Object(ee.jsx)(ne,{}),t,Object(ee.jsx)(J.a,{fluid:!0,children:Object(ee.jsx)(Ne,{})})]})},Ee=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.timeLog})),a=Object(d.c)((function(e){return e.auth})),r=ye()().format("YYYY-MM-DD"),s=Object(c.useState)(r),n=Object(j.a)(s,2),l=n[0],o=n[1],i=Object(c.useState)(""),u=Object(j.a)(i,2),O=u[0],p=u[1],m=Object(c.useState)(""),x=Object(j.a)(m,2),g=x[0],f=x[1],y=Object(c.useState)(!1),N=Object(j.a)(y,2),v=N[0],S=N[1],L=Object(c.useState)(!1),U=Object(j.a)(L,2),P=U[0],R=U[1],C=Object(c.useState)(""),D=Object(j.a)(C,2),T=D[0],k=D[1];return Object(c.useEffect)((function(){e({type:_,payload:!1}),e({type:w,payload:{}})}),[]),Object(ee.jsx)(ve,{children:Object(ee.jsx)(J.a,{className:"mt-5",fluid:!0,children:Object(ee.jsx)(V.a,{className:"justify-content-md-center",children:Object(ee.jsx)(q.a,{lg:"5",md:"7",children:Object(ee.jsx)(oe.a,{className:"bg-secondary shadow border-0",children:Object(ee.jsxs)(ie.a,{className:"px-lg-5 py-lg-5",children:[Object(ee.jsx)("div",{className:"text-center text-muted mb-4",children:Object(ee.jsxs)("h2",{children:[Object(ee.jsx)(H.b,{to:"/",children:"Go Back"})," \xbb Log Time"]})}),a.user.is_company_owner?Object(ee.jsx)("h4",{className:"text-center pb-4",style:{color:"red",fontWeight:"bold"},children:"You're not allowed in this page!"}):Object(ee.jsxs)(je.a,{onSubmit:function(t){t.preventDefault();var a,c=60*parseInt(O||0)+parseInt(g||0);e((a={date:l,duration:c,injury_noted:v,policy_violation_noted:P,comment:T},function(e){e({type:E,payload:!0}),e({type:_,payload:!1}),e({type:w,payload:{}}),h.post("/time/logs/create/",a,{headers:b()}).then((function(t){e({type:E,payload:!1}),e({type:_,payload:!0})})).catch((function(t){console.log(t.response),t.response&&t.response.data.duration?e({type:w,payload:{message:"Duration must be less than or equal 24 hours"}}):e({type:w,payload:t.response?t.response.data:{message:"Something went wrong"}}),e({type:E,payload:!1})}))}))},children:[Object(ee.jsx)(de.a,{className:"mb-3",children:Object(ee.jsxs)(be.a,{className:"input-group-alternative",children:[Object(ee.jsx)(ue.a,{addonType:"prepend",children:Object(ee.jsx)(Oe.a,{children:Object(ee.jsx)("i",{className:"far fa-calendar"})})}),Object(ee.jsx)(he.a,{placeholder:"Date",type:"date",max:ye()().format("YYYY-MM-DD"),value:l,onChange:function(e){return o(e.target.value)}})]})}),Object(ee.jsx)(de.a,{children:Object(ee.jsxs)(be.a,{className:"input-group-alternative",children:[Object(ee.jsx)(ue.a,{addonType:"prepend",children:Object(ee.jsx)(Oe.a,{children:Object(ee.jsx)("i",{className:"far fa-clock"})})}),Object(ee.jsx)(he.a,{placeholder:"Hours",value:O,type:"text",onChange:function(e){return p(e.target.value.replace(/[^0-9]/g,"").replace(/2[4-9]|[3-9]\d+|[1-9]\d{2,}/g,"23"))}}),Object(ee.jsx)(he.a,{placeholder:"Minutes",value:g,type:"text",onChange:function(e){return f(e.target.value.replace(/[^0-9]/g,"").replace(/6[0-9]|[7-9]\d+|[1-9]\d{2,}/g,"59"))}})]})}),Object(ee.jsx)(de.a,{children:Object(ee.jsx)(be.a,{className:"input-group-alternative",children:Object(ee.jsx)(he.a,{placeholder:"Comments (Optional)",value:T,rows:3,type:"textarea",onChange:function(e){return k(e.target.value)}})})}),Object(ee.jsxs)("div",{className:"custom-control custom-control-alternative custom-checkbox mb-3",children:[Object(ee.jsx)("input",{className:"custom-control-input",id:"injuriNote",type:"checkbox",checked:v,onChange:function(e){return S(e.target.checked)}}),Object(ee.jsx)("label",{className:"custom-control-label",htmlFor:"injuriNote",children:"Were there any injuries noted?"})]}),Object(ee.jsxs)("div",{className:"custom-control custom-control-alternative custom-checkbox mb-3",children:[Object(ee.jsx)("input",{className:"custom-control-input",id:"policyNote",type:"checkbox",checked:P,onChange:function(e){return R(e.target.checked)}}),Object(ee.jsx)("label",{className:"custom-control-label",htmlFor:"policyNote",children:"Were there any violation of company policy noted?"})]}),Object(ee.jsxs)("div",{className:"custom-control custom-control-alternative custom-checkbox mb-3",children:[Object(ee.jsx)("input",{className:"custom-control-input",disabled:!0,type:"checkbox",id:"companyName",checked:!0}),Object(ee.jsxs)("label",{className:"custom-control-label",htmlFor:"companyName",children:["Company: ",a.user.company]})]}),t.createLogError&&Object(ee.jsx)("small",{style:{color:"red"},children:t.createLogError}),Object(ee.jsxs)("div",{className:"text-center",children:[t.logSaved&&Object(ee.jsxs)("small",{style:{color:"green",fontWeight:"bold"},children:["Log saved successfully! ",Object(ee.jsx)(H.b,{to:"/",children:"Go back"})]}),t.logSaveError&&Object(ee.jsx)("small",{style:{color:"red",fontWeight:"bold"},children:t.logSaveError})]}),Object(ee.jsx)("div",{className:"text-center",children:Object(ee.jsx)(pe.a,{disabled:t.loading,className:"my-4",color:"primary",type:"submit",children:t.loading?"Saving...":"Save"})})]})]})})})})})})},_e=function(e){var t=e.match,a=Object(d.b)(),r=Object(d.c)((function(e){return e.timeLog})),s=Object(d.c)((function(e){return e.auth})),n=ye()().format("YYYY-MM-DD"),l=t.params.logId;Object(c.useEffect)((function(){a(function(e){return function(t){t({type:U,payload:!0}),h.get("/time/logs/".concat(e),{headers:b()}).then((function(e){t({type:S,payload:e.data}),t({type:U,payload:!1})})).catch((function(e){t({type:L,payload:e.response?e.response.data:{detail:"Something went wrong"}}),t({type:U,payload:!1})}))}}(l))}),[]),Object(c.useEffect)((function(){Object.keys(r.singleLog).length>0&&(O(r.singleLog.date),g(parseInt(r.singleLog.duration/60)),v(r.singleLog.duration%60),D(r.singleLog.injury_noted),A(r.singleLog.policy_violation_noted),G(r.singleLog.comment))}),[r.singleLog]);var o=Object(c.useState)(n),i=Object(j.a)(o,2),u=i[0],O=i[1],p=Object(c.useState)(""),m=Object(j.a)(p,2),x=m[0],g=m[1],f=Object(c.useState)(""),y=Object(j.a)(f,2),N=y[0],v=y[1],P=Object(c.useState)(!1),R=Object(j.a)(P,2),C=R[0],D=R[1],T=Object(c.useState)(!1),k=Object(j.a)(T,2),I=k[0],A=k[1],Y=Object(c.useState)(""),M=Object(j.a)(Y,2),F=M[0],G=M[1];return Object(c.useEffect)((function(){a({type:_,payload:!1}),a({type:w,payload:{}}),a({type:L,payload:{}})}),[]),Object(ee.jsx)(ve,{children:Object(ee.jsx)(J.a,{className:"mt-5",fluid:!0,children:Object(ee.jsx)(V.a,{className:"justify-content-md-center",children:Object(ee.jsx)(q.a,{lg:"5",md:"7",children:Object(ee.jsx)(oe.a,{className:"bg-secondary shadow border-0",children:Object(ee.jsxs)(ie.a,{className:"px-lg-5 py-lg-5",children:[Object(ee.jsx)("div",{className:"text-center text-muted mb-4",children:Object(ee.jsxs)("h2",{children:[Object(ee.jsx)(H.b,{to:"/",children:"Go Back"})," \xbb Edit Log"]})}),r.singleLogLoading?Object(ee.jsx)("h4",{className:"text-center",children:"Loading... Please wait!"}):Object(ee.jsx)(ee.Fragment,{children:r.singleLogLoadError?Object(ee.jsx)("h4",{className:"text-center",style:{color:"red",fontWeight:"bold"},children:r.singleLogLoadError}):Object(ee.jsxs)(je.a,{role:"form",onSubmit:function(e){e.preventDefault();var t=60*parseInt(x||0)+parseInt(N||0);a(function(e,t){return function(a){a({type:E,payload:!0}),a({type:_,payload:!1}),a({type:w,payload:{}}),h.put("/time/logs/".concat(e,"/"),t,{headers:b()}).then((function(e){a({type:E,payload:!1}),a({type:_,payload:!0})})).catch((function(e){console.log(e.response),e.response&&e.response.data.duration?a({type:w,payload:{message:"Duration must be less than or equal 24 hours"}}):a({type:w,payload:e.response?e.response.data:{message:"Something went wrong"}}),a({type:E,payload:!1})}))}}(l,{date:u,duration:t,injury_noted:C,policy_violation_noted:I,comment:F}))},children:[Object(ee.jsx)(de.a,{className:"mb-3",children:Object(ee.jsxs)(be.a,{className:"input-group-alternative",children:[Object(ee.jsx)(ue.a,{addonType:"prepend",children:Object(ee.jsx)(Oe.a,{children:Object(ee.jsx)("i",{className:"far fa-calendar"})})}),Object(ee.jsx)(he.a,{placeholder:"Date",type:"date",max:ye()().format("YYYY-MM-DD"),value:u,onChange:function(e){return O(e.target.value)}})]})}),Object(ee.jsx)(de.a,{children:Object(ee.jsxs)(be.a,{className:"input-group-alternative",children:[Object(ee.jsx)(ue.a,{addonType:"prepend",children:Object(ee.jsx)(Oe.a,{children:Object(ee.jsx)("i",{className:"far fa-clock"})})}),Object(ee.jsx)(he.a,{placeholder:"Hours",value:x,type:"text",onChange:function(e){return g(e.target.value.replace(/[^0-9]/g,"").replace(/2[4-9]|[3-9]\d+|[1-9]\d{2,}/g,"23"))}}),Object(ee.jsx)(he.a,{placeholder:"Minutes",value:N,type:"text",onChange:function(e){return v(e.target.value.replace(/[^0-9]/g,"").replace(/6[0-9]|[7-9]\d+|[1-9]\d{2,}/g,"59"))}})]})}),Object(ee.jsx)(de.a,{children:Object(ee.jsx)(be.a,{className:"input-group-alternative",children:Object(ee.jsx)(he.a,{placeholder:"Comments (Optional)",value:F,rows:3,type:"textarea",onChange:function(e){return G(e.target.value)}})})}),Object(ee.jsxs)("div",{className:"custom-control custom-control-alternative custom-checkbox mb-3",children:[Object(ee.jsx)("input",{className:"custom-control-input",id:"injuriNote",type:"checkbox",checked:C,onChange:function(e){return D(e.target.checked)}}),Object(ee.jsx)("label",{className:"custom-control-label",htmlFor:"injuriNote",children:"Were there any injuries noted?"})]}),Object(ee.jsxs)("div",{className:"custom-control custom-control-alternative custom-checkbox mb-3",children:[Object(ee.jsx)("input",{className:"custom-control-input",id:"policyNote",type:"checkbox",checked:I,onChange:function(e){return A(e.target.checked)}}),Object(ee.jsx)("label",{className:"custom-control-label",htmlFor:"policyNote",children:"Were there any violation of company policy noted?"})]}),Object(ee.jsxs)("div",{className:"custom-control custom-control-alternative custom-checkbox mb-3",children:[Object(ee.jsx)("input",{className:"custom-control-input",disabled:!0,type:"checkbox",id:"companyName",checked:!0}),Object(ee.jsxs)("label",{className:"custom-control-label",htmlFor:"companyName",children:["Company: ",s.user.company]})]}),r.createLogError&&Object(ee.jsx)("small",{style:{color:"red"},children:r.createLogError}),Object(ee.jsxs)("div",{className:"text-center",children:[r.logSaved&&Object(ee.jsxs)("small",{style:{color:"green",fontWeight:"bold"},children:["Log saved successfully! ",Object(ee.jsx)(H.b,{to:"/",children:"Go back"})]}),r.logSaveError&&Object(ee.jsx)("small",{style:{color:"red",fontWeight:"bold"},children:r.logSaveError})]}),Object(ee.jsx)("div",{className:"text-center",children:Object(ee.jsx)(pe.a,{disabled:r.loading,className:"my-4",color:"primary",type:"submit",children:r.loading?"Saving...":"Save"})})]})})]})})})})})})},we=a(109),Se=function(){return function(e){e({type:D,payload:!0}),h.get("/time/users",{headers:b()}).then((function(t){e({type:T,payload:t.data}),e({type:D,payload:!1})})).catch((function(t){e({type:D,payload:!1})}))}},Le=a(108),Ue=a(24),Pe=(a(46),function(e){var t=e.user,a=Object(d.b)(),c=function(e){Object(Ue.confirmAlert)({title:"Confirm to delete",message:"Are you sure to delete this user?",buttons:[{label:"Cancel"},{label:"Yes",onClick:function(){return a(function(e){return function(t){t({type:D,payload:!0}),h.delete("/auth/user/".concat(e,"/"),{headers:b()}).then((function(e){t(Se())})).catch((function(e){console.log(e.response)}))}}(e))}}]})};return Object(ee.jsxs)("tr",{children:[Object(ee.jsx)("th",{scope:"row",className:"text-center",children:t.id}),Object(ee.jsx)("th",{className:"text-center",children:t.username}),Object(ee.jsx)("td",{className:"text-center",children:t.email}),Object(ee.jsx)("td",{className:"text-center",children:t.duration}),Object(ee.jsxs)("td",{className:"text-center",children:[Object(ee.jsx)(pe.a,{color:"primary",size:"sm",tag:H.b,to:"/user/".concat(t.id),children:Object(ee.jsx)("i",{className:"fa fa-eye"})}),Object(ee.jsx)(pe.a,{color:"danger",size:"sm",className:"ml-3",onClick:function(){return c(t.id)},children:Object(ee.jsx)("i",{className:"fa fa-trash"})})]})]})}),Re=function(e){var t=e.users,a=e.loading;return Object(ee.jsx)("div",{children:a?Object(ee.jsx)("h4",{className:"text-center pb-3",children:"Loading..."}):Object(ee.jsxs)(Le.a,{className:"align-items-center table-flush",responsive:!0,children:[Object(ee.jsx)("thead",{className:"thead-light",children:Object(ee.jsxs)("tr",{children:[Object(ee.jsx)("th",{scope:"col",className:"text-center",children:"User ID"}),Object(ee.jsx)("th",{scope:"col",className:"text-center",children:"Username"}),Object(ee.jsx)("th",{scope:"col",className:"text-center",children:"Email"}),Object(ee.jsx)("th",{scope:"col",className:"text-center",children:"This Month Total Time"}),Object(ee.jsx)("th",{scope:"col",className:"text-center",children:"Actions"})]})}),Object(ee.jsx)("tbody",{children:t.map((function(e){return Object(ee.jsx)(Pe,{user:e},u())}))})]})})},Ce=function(e){var t=Object(d.b)(),a=Object(d.c)((function(e){return e.admin})),r=Object(d.c)((function(e){return e.auth}));return Object(c.useEffect)((function(){t(Se())}),[]),Object(ee.jsx)(ve,{children:Object(ee.jsx)(J.a,{className:"mt-5",fluid:!0,children:Object(ee.jsx)(V.a,{className:"mt-5",children:Object(ee.jsx)(q.a,{className:"mb-5 mb-xl-0",xl:"12",children:Object(ee.jsxs)(oe.a,{className:"shadow",children:[Object(ee.jsx)(we.a,{className:"border-0",children:Object(ee.jsx)(V.a,{className:"align-items-center",children:Object(ee.jsx)("div",{className:"col",children:Object(ee.jsxs)("h3",{className:"mb-0",children:[Object(ee.jsx)(H.b,{to:"/",children:"Go Back"})," \xbb Users"]})})})}),r.user.is_company_owner?Object(ee.jsx)(Re,{users:a.users,loading:a.loading}):Object(ee.jsx)("h4",{className:"text-center pb-4",style:{color:"red",fontWeight:"bold"},children:"You're not allowed in this page!"})]})})})})})},De=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.userProfile})),a=Object(c.useState)(""),r=Object(j.a)(a,2),s=r[0],n=r[1],l=Object(c.useState)(""),o=Object(j.a)(l,2),i=o[0],u=o[1],O=Object(c.useState)(""),p=Object(j.a)(O,2),m=p[0],x=p[1];return Object(ee.jsx)(J.a,{className:"my-5",fluid:!0,children:Object(ee.jsx)(V.a,{className:"justify-content-md-center",children:Object(ee.jsx)(q.a,{lg:"5",md:"7",children:Object(ee.jsx)(oe.a,{className:"bg-secondary shadow border-0",children:Object(ee.jsxs)(ie.a,{className:"px-lg-5 py-lg-5",children:[Object(ee.jsx)("div",{className:"text-center text-muted mb-4",children:Object(ee.jsx)("h2",{children:"Change Password"})}),Object(ee.jsxs)(je.a,{role:"form",onSubmit:function(t){var a;t.preventDefault(),e((a={old_password:s,new_password1:i,new_password2:m},function(e){e({type:k,payload:!0}),e({type:F,payload:{}}),h.post("/auth/password/change/",a,{headers:b()}).then((function(t){e({type:M}),e({type:k,payload:!1})})).catch((function(t){e({type:k,payload:!1}),e({type:F,payload:t.response.data})}))}))},children:[Object(ee.jsxs)(de.a,{className:"mb-3",children:[Object(ee.jsxs)(be.a,{className:"input-group-alternative",children:[Object(ee.jsx)(ue.a,{addonType:"prepend",children:Object(ee.jsx)(Oe.a,{children:Object(ee.jsx)("i",{className:"fa fa-key"})})}),Object(ee.jsx)(he.a,{placeholder:"Old Password",type:"password",value:s,onChange:function(e){return n(e.target.value)}})]}),t.passwordUpdateErrors.old_password&&Object(ee.jsx)("small",{style:{color:"red"},children:t.passwordUpdateErrors.old_password[0]})]}),Object(ee.jsxs)(de.a,{className:"mb-3",children:[Object(ee.jsxs)(be.a,{className:"input-group-alternative",children:[Object(ee.jsx)(ue.a,{addonType:"prepend",children:Object(ee.jsx)(Oe.a,{children:Object(ee.jsx)("i",{className:"fa fa-key"})})}),Object(ee.jsx)(he.a,{placeholder:"New Password",value:i,onChange:function(e){return u(e.target.value)},type:"password"})]}),t.passwordUpdateErrors.new_password1&&Object(ee.jsx)("small",{style:{color:"red"},children:t.passwordUpdateErrors.new_password1[0]})]}),Object(ee.jsxs)(de.a,{className:"mb-3",children:[Object(ee.jsxs)(be.a,{className:"input-group-alternative",children:[Object(ee.jsx)(ue.a,{addonType:"prepend",children:Object(ee.jsx)(Oe.a,{children:Object(ee.jsx)("i",{className:"fa fa-key"})})}),Object(ee.jsx)(he.a,{placeholder:"Confirm Password",value:m,type:"password",onChange:function(e){return x(e.target.value)}})]}),t.passwordUpdateErrors.new_password2&&Object(ee.jsx)("small",{style:{color:"red"},children:t.passwordUpdateErrors.new_password2[0]})]}),t.userPasswordUpdated&&Object(ee.jsx)("div",{className:"text-center",children:Object(ee.jsx)("small",{style:{color:"green",fontWeight:"bold"},children:"Password updated successfully!"})}),Object(ee.jsx)("div",{className:"text-center",children:Object(ee.jsx)(pe.a,{disabled:t.loading,className:"my-3",color:"primary",type:"submit",children:t.loading?"Updating...":"Update Password"})})]})]})})})})})},Te=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.userProfile})),a=Object(d.c)((function(e){return e.auth})),r=Object(c.useState)(""),s=Object(j.a)(r,2),n=s[0],l=s[1],o=Object(c.useState)(""),i=Object(j.a)(o,2),u=i[0],O=i[1],p=Object(c.useState)(""),m=Object(j.a)(p,2),x=m[0],g=m[1],f=Object(c.useState)(""),y=Object(j.a)(f,2),N=y[0],v=y[1],E=Object(c.useState)(""),_=Object(j.a)(E,2),w=_[0],S=_[1],L=Object(c.useState)(""),U=Object(j.a)(L,2),P=U[0],R=U[1],C=Object(c.useState)(""),D=Object(j.a)(C,2),T=D[0],I=D[1],M=Object(c.useState)(""),F=Object(j.a)(M,2),G=F[0],W=F[1],z=Object(c.useState)(""),H=Object(j.a)(z,2),J=H[0],K=H[1];Object(c.useEffect)((function(){a.user.username&&l(a.user.username),a.user.email&&O(a.user.email),a.user.first_name&&g(a.user.first_name),a.user.last_name&&v(a.user.last_name),a.user.address&&S(a.user.address),a.user.phone&&R(a.user.phone),a.user.city&&I(a.user.city),a.user.country&&W(a.user.country),a.user.postal_code&&K(a.user.postal_code)}),[a.user]),Object(c.useEffect)((function(){e({type:Y,payload:{}})}),[]);return Object(ee.jsx)(ie.a,{children:Object(ee.jsxs)(je.a,{onSubmit:function(t){t.preventDefault();var c,r,s={username:n,email:u,first_name:x,last_name:N,address:w,city:T,phone:P,country:G,postal_code:J};e((c=a.user.id,r=s,function(e){e({type:k,payload:!0}),e({type:Y,payload:{}}),h.put("/auth/user/".concat(c,"/"),r,{headers:b()}).then((function(t){console.log(t.data),e({type:A,payload:t.data}),e({type:k,payload:!1}),e(B())})).catch((function(t){e({type:Y,payload:t.response.data}),e({type:k,payload:!1})}))}))},children:[Object(ee.jsx)("h6",{className:"heading-small text-muted mb-4",children:"User information"}),Object(ee.jsxs)("div",{className:"pl-lg-4",children:[Object(ee.jsxs)(V.a,{children:[Object(ee.jsx)(q.a,{lg:"6",children:Object(ee.jsx)(Ie,{inputId:"input-username",labelText:"Username",value:n,disabled:!0,hasError:!!t.userProfileUpdateErrors.username,errorMsg:t.userProfileUpdateErrors.username})}),Object(ee.jsx)(q.a,{lg:"6",children:Object(ee.jsx)(Ie,{inputId:"input-email",labelText:"Email address",value:u,disabled:!0,hasError:!!t.userProfileUpdateErrors.email,errorMsg:t.userProfileUpdateErrors.email})})]}),Object(ee.jsxs)(V.a,{children:[Object(ee.jsx)(q.a,{lg:"6",children:Object(ee.jsx)(Ie,{inputId:"input-first-name",labelText:"First name",value:x,onChange:g,hasError:!!t.userProfileUpdateErrors.first_name,errorMsg:t.userProfileUpdateErrors.first_name})}),Object(ee.jsx)(q.a,{lg:"6",children:Object(ee.jsx)(Ie,{inputId:"input-last-name",labelText:"Last name",value:N,onChange:v,hasError:!!t.userProfileUpdateErrors.last_name,errorMsg:t.userProfileUpdateErrors.last_name})})]})]}),Object(ee.jsx)("hr",{className:"my-4"}),Object(ee.jsx)("h6",{className:"heading-small text-muted mb-4",children:"Contact information"}),Object(ee.jsxs)("div",{className:"pl-lg-4",children:[Object(ee.jsx)(V.a,{children:Object(ee.jsx)(q.a,{md:"12",children:Object(ee.jsx)(Ie,{inputId:"input-address",labelText:"Address",value:w,onChange:S,hasError:!(!t.userProfileUpdateErrors.profile||!t.userProfileUpdateErrors.profile.address),errorMsg:t.userProfileUpdateErrors.profile&&t.userProfileUpdateErrors.profile.address})})}),Object(ee.jsxs)(V.a,{children:[Object(ee.jsx)(q.a,{lg:"6",children:Object(ee.jsx)(Ie,{inputId:"input-phone",labelText:"Phone",value:P,onChange:R,hasError:!(!t.userProfileUpdateErrors.profile||!t.userProfileUpdateErrors.profile.phone),errorMsg:t.userProfileUpdateErrors.profile&&t.userProfileUpdateErrors.profile.phone})}),Object(ee.jsx)(q.a,{lg:"6",children:Object(ee.jsx)(Ie,{inputId:"input-city",labelText:"City",value:T,onChange:I,hasError:!(!t.userProfileUpdateErrors.profile||!t.userProfileUpdateErrors.profile.city),errorMsg:t.userProfileUpdateErrors.profile&&t.userProfileUpdateErrors.profile.city})})]}),Object(ee.jsxs)(V.a,{children:[Object(ee.jsx)(q.a,{lg:"6",children:Object(ee.jsx)(Ie,{inputId:"input-country",labelText:"Country",value:G,onChange:W,hasError:!(!t.userProfileUpdateErrors.profile||!t.userProfileUpdateErrors.profile.country),errorMsg:t.userProfileUpdateErrors.profile&&t.userProfileUpdateErrors.profile.country})}),Object(ee.jsx)(q.a,{lg:"6",children:Object(ee.jsx)(Ie,{inputId:"input-postal-code",labelText:"Postal code",value:J,onChange:K,hasError:!(!t.userProfileUpdateErrors.profile||!t.userProfileUpdateErrors.profile.postal_code),errorMsg:t.userProfileUpdateErrors.profile&&t.userProfileUpdateErrors.profile.postal_code})})]})]}),t.userProfileUpdated&&Object(ee.jsx)("div",{className:"text-center",children:Object(ee.jsx)("small",{style:{color:"green",fontWeight:"bold"},children:"Profile updated successfully!"})}),Object.keys(t.userProfileUpdateErrors).length>0&&Object(ee.jsx)("div",{className:"text-center",children:Object(ee.jsx)("small",{style:{color:"red",fontWeight:"bold"},children:"Couldn't save the information, please try again!"})}),Object(ee.jsx)("div",{className:"text-right",children:Object(ee.jsx)(pe.a,{disabled:t.loading,className:"my-4",color:"primary",type:"submit",children:t.loading?"Saving...":"Save"})})]})})},ke=function(e){var t=e.htmlFor,a=e.text;return Object(ee.jsx)("label",{className:"form-control-label",htmlFor:t,children:a})},Ie=function(e){var t=e.inputId,a=e.labelText,c=e.value,r=e.onChange,s=e.inputType,n=e.placeholder,l=e.disabled,o=e.hasError,i=e.errorMsg;return Object(ee.jsxs)(de.a,{children:[Object(ee.jsx)(ke,{htmlFor:t,text:a}),Object(ee.jsx)(he.a,{className:"form-control-alternative",id:t,placeholder:n||a,type:s||"text",value:c,disabled:l||!1,onChange:r?function(e){return r(e.target.value)}:null}),o&&Object(ee.jsx)("small",{style:{color:"red",fontWeight:"bold"},children:i})]})},Ae=function(){var e=Object(c.useState)(!1),t=Object(j.a)(e,2),a=t[0],r=t[1];return Object(ee.jsx)(ve,{children:Object(ee.jsx)(J.a,{className:"mt-5",fluid:!0,children:Object(ee.jsx)(V.a,{children:Object(ee.jsx)(q.a,{className:"order-xl-1",children:Object(ee.jsxs)(oe.a,{className:"bg-secondary shadow",children:[Object(ee.jsx)(we.a,{className:"bg-white border-0",children:Object(ee.jsxs)(V.a,{className:"align-items-center",children:[Object(ee.jsx)(q.a,{xs:"8",children:Object(ee.jsx)("h3",{className:"mb-0",children:a?"Change Password":"My account"})}),Object(ee.jsx)(q.a,{className:"text-right",xs:"4",children:Object(ee.jsx)(pe.a,{color:a?"danger":"primary",onClick:function(){return r(!a)},size:"sm",children:a?"Cancel":"Change Password"})})]})}),a?Object(ee.jsx)(De,{}):Object(ee.jsx)(Te,{})]})})})})})},Ye=function(e){var t=e.log,a=Object(d.b)(),c=function(e){Object(Ue.confirmAlert)({title:"Confirm to delete",message:"Are you sure to delete this log?",buttons:[{label:"Cancel"},{label:"Yes",onClick:function(){return a(function(e){return function(t){t({type:E,payload:!0}),h.delete("/time/logs/".concat(e),{headers:b()}).then((function(e){t(ge())})).catch((function(e){console.log(e.response)}))}}(e))}}]})};return Object(ee.jsxs)("tr",{children:[Object(ee.jsx)("th",{scope:"row",className:"text-center",children:t.date}),Object(ee.jsx)("td",{className:"text-center",children:t.duration}),Object(ee.jsx)("td",{className:"text-center",children:t.injury_noted?Object(ee.jsx)("i",{className:"fa fa-check"}):Object(ee.jsx)("i",{className:"fa fa-times"})}),Object(ee.jsx)("td",{className:"text-center",children:t.policy_violation_noted?Object(ee.jsx)("i",{className:"fa fa-check"}):Object(ee.jsx)("i",{className:"fa fa-times"})}),Object(ee.jsx)("td",{className:"text-center",children:t.comment||"N/A"}),Object(ee.jsxs)("td",{className:"text-center",children:[Object(ee.jsx)(pe.a,{color:"primary",size:"sm",to:"/log/update/".concat(t.id),tag:H.b,children:Object(ee.jsx)("i",{className:"fa fa-edit"})}),Object(ee.jsx)(pe.a,{color:"danger",size:"sm",className:"ml-3",onClick:function(){return c(t.id)},children:Object(ee.jsx)("i",{className:"fa fa-trash"})})]})]})},Me=function(e){var t=e.logs,a=e.loading;return Object(ee.jsx)("div",{children:a?Object(ee.jsx)("h4",{className:"text-center pb-3",children:"Loading..."}):Object(ee.jsxs)(Le.a,{className:"align-items-center table-flush",responsive:!0,children:[Object(ee.jsx)("thead",{className:"thead-light",children:Object(ee.jsxs)("tr",{children:[Object(ee.jsx)("th",{scope:"col",className:"text-center",children:"Date"}),Object(ee.jsx)("th",{scope:"col",className:"text-center",children:"Duration"}),Object(ee.jsx)("th",{scope:"col",className:"text-center",children:"Injuries Noted"}),Object(ee.jsx)("th",{scope:"col",className:"text-center",children:"Violations noted"}),Object(ee.jsx)("th",{scope:"col",className:"text-center",children:"Comments"}),Object(ee.jsx)("th",{scope:"col",className:"text-center",children:"Actions"})]})}),Object(ee.jsx)("tbody",{children:t.map((function(e){return Object(ee.jsx)(Ye,{log:e},u())}))})]})})},Fe=Object(i.h)((function(e){var t=e.match,a=Object(d.b)(),r=Object(c.useState)(ye()().format("YYYY-MM")),s=Object(j.a)(r,2),n=s[0],o=s[1];return Object(ee.jsx)("div",{className:"col text-right",children:Object(ee.jsx)("h3",{className:"mb-0",children:Object(ee.jsx)("input",{type:"month",value:n,max:ye()().format("YYYY-MM"),onChange:function(e){var c=e.target.value;if(JSON.stringify(c)!==JSON.stringify(n)){var r=ye()(c),s={year:r.year(),month:r.month()+1};t.params.userId&&(s=Object(l.a)(Object(l.a)({},s),{},{created_by:t.params.userId})),a(ge(s))}o(c)}})})})})),Ge=function(e){var t=Object(d.b)(),a=Object(d.c)((function(e){return e.timeLog}));return Object(c.useEffect)((function(){t(ge())}),[]),Object(ee.jsx)(ve,{children:Object(ee.jsx)(J.a,{className:"mt-5",fluid:!0,children:Object(ee.jsx)(V.a,{className:"mt-5",children:Object(ee.jsx)(q.a,{className:"mb-5 mb-xl-0",xl:"12",children:Object(ee.jsxs)(oe.a,{className:"shadow",children:[Object(ee.jsx)(we.a,{className:"border-0",children:Object(ee.jsxs)(V.a,{className:"align-items-center",children:[Object(ee.jsx)("div",{className:"col",children:Object(ee.jsxs)("h3",{className:"mb-0",children:["Logs",Object(ee.jsx)(pe.a,{color:"primary",tag:H.b,to:"/create-log",size:"sm",className:"ml-4",children:"Create Log"})]})}),Object(ee.jsx)(Fe,{})]})}),Object(ee.jsx)(Me,{logs:a.logs,loading:a.loading})]})})})})})},We=function(){return Object(d.c)((function(e){return e.auth})).user.is_company_owner?Object(ee.jsx)(Ce,{}):Object(ee.jsx)(Ge,{})},ze=a(31),Be=a.n(ze),He=function(e){var t=e.history;return Object(ee.jsx)("div",{className:Be.a.notFound,children:Object(ee.jsxs)("div",{className:Be.a.notFound_box,children:[Object(ee.jsx)("h1",{children:"Page not found"}),Object(ee.jsx)("button",{onClick:function(){return t.push("/")},children:"Go Home"})]})})},Je=function(e){var t=e.history;return Object(d.b)()(function(e){return function(t){t({type:y,payload:!0}),localStorage.removeItem("timeLoggerUserToken"),t({type:f}),t({type:y,payload:!1}),e.push("/")}}(t)),Object(ee.jsx)("h1",{children:"Logged out"})},Ve=function(e){var t=e.match,a=Object(d.b)(),r=Object(d.c)((function(e){return e.auth})),s=Object(d.c)((function(e){return e.timeLog}));Object(c.useEffect)((function(){a(ge({created_by:n}))}),[]);var n=t.params.userId;return Object(ee.jsx)(ve,{children:Object(ee.jsx)(J.a,{className:"mt-5",fluid:!0,children:Object(ee.jsx)(V.a,{className:"mt-5",children:Object(ee.jsx)(q.a,{className:"mb-5 mb-xl-0",xl:"12",children:Object(ee.jsxs)(oe.a,{className:"shadow",children:[Object(ee.jsx)(we.a,{className:"border-0",children:Object(ee.jsxs)(V.a,{className:"align-items-center",children:[Object(ee.jsx)("div",{className:"col",children:Object(ee.jsxs)("h3",{className:"mb-0",children:[Object(ee.jsx)(H.b,{to:"/users",children:"Go Back"})," \xbb User ID: ",n]})}),Object(ee.jsx)(Fe,{})]})}),r.user.is_company_owner?Object(ee.jsx)(Me,{logs:s.logs,loading:s.loading}):Object(ee.jsx)("h4",{className:"text-center pb-4",style:{color:"red",fontWeight:"bold"},children:"You're not allowed in this page!"})]})})})})})},qe=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.timeLog})),a=Object(d.c)((function(e){return e.auth})),r=ye()().format("YYYY-MM-DD"),s=ye()().format("YYYY-MM-01"),n=Object(c.useState)(s),l=Object(j.a)(n,2),o=l[0],i=l[1],u=Object(c.useState)(r),O=Object(j.a)(u,2),p=O[0],m=O[1],x=Object(c.useState)(0),g=Object(j.a)(x,2),f=g[0],y=g[1];return Object(c.useEffect)((function(){e((function(e){e({type:G,payload:!0}),h.get("/auth/companies/",{headers:b()}).then((function(t){e({type:W,payload:t.data}),e({type:G,payload:!1})})).catch((function(t){e({type:z,payload:"Error loading company's data"}),e({type:G,payload:!1})}))}))}),[]),Object(c.useEffect)((function(){var e;a.user.is_superuser||y(null===(e=a.company.data.find((function(e){return e.name===a.user.company})))||void 0===e?void 0:e.id)}),[a.company]),Object(ee.jsx)(V.a,{className:"justify-content-md-center mb-5",children:Object(ee.jsx)(q.a,{lg:"5",md:"7",children:Object(ee.jsx)(oe.a,{className:"bg-secondary shadow border-0",children:Object(ee.jsx)(ie.a,{children:Object(ee.jsxs)(je.a,{onSubmit:function(t){var a;t.preventDefault(),e((a={start_date:o,end_date:p,company:f},function(e){e({type:P,payload:!0}),h.post("/time/log/report/",a,{headers:b()}).then((function(t){e({type:R,payload:t.data}),e({type:P,payload:!1})})).catch((function(t){e({type:P,payload:!1}),e({type:C,payload:"Failed to get report"})}))}))},children:[Object(ee.jsxs)(V.a,{children:[Object(ee.jsx)(q.a,{lg:"6",children:Object(ee.jsxs)(de.a,{className:"mb-3",children:[Object(ee.jsx)(Ke,{htmlFor:"startDate",text:"Start Date"}),Object(ee.jsx)(he.a,{placeholder:"Start Date",id:"startDate",type:"date",value:o,onChange:function(e){return i(e.target.value)}})]})}),Object(ee.jsx)(q.a,{lg:"6",children:Object(ee.jsxs)(de.a,{className:"mb-3",children:[Object(ee.jsx)(Ke,{htmlFor:"endDate",text:"End Date"}),Object(ee.jsx)(he.a,{placeholder:"End Date",id:"endDate",type:"date",max:ye()().format("YYYY-MM-DD"),value:p,onChange:function(e){return m(e.target.value)}})]})})]}),Object(ee.jsx)(V.a,{children:Object(ee.jsx)(q.a,{children:Object(ee.jsxs)(de.a,{className:"mb-3",children:[Object(ee.jsx)(Ke,{htmlFor:"company",text:"Company"}),a.company.loading?Object(ee.jsx)("p",{children:Object(ee.jsx)("small",{children:"Loading..."})}):Object(ee.jsx)(ee.Fragment,{children:a.company.error?Object(ee.jsx)("p",{children:Object(ee.jsx)("small",{children:a.company.error})}):Object(ee.jsxs)(he.a,{type:"select",value:f,onChange:function(e){return y(e.target.value)},children:[Object(ee.jsx)("option",{value:0,disabled:!a.user.is_superuser,children:"Select Company"}),a.company.data.map((function(e){return Object(ee.jsx)("option",{value:e.id,disabled:a.user.company!==e.name&&!a.user.is_superuser,children:e.name},e.id)}))]})})]})})}),Object(ee.jsx)("div",{className:"text-center",children:Object(ee.jsx)(pe.a,{disabled:t.logReport.loading,className:"my-1",color:"primary",type:"submit",children:t.logReport.loading?"Please wait...":"Get Report"})})]})})})})})},Ke=function(e){var t=e.htmlFor,a=e.text;return Object(ee.jsx)("label",{className:"form-control-label",htmlFor:t,children:a})},Qe=function(e){var t=e.data;return Object(ee.jsx)(ee.Fragment,{children:t.map((function(e){return Object(ee.jsxs)("div",{className:"mb-4",children:[Object(ee.jsx)("h2",{className:"text-center",children:e.company}),Object(ee.jsx)("h3",{className:"text-center",children:e.date_range}),Object(ee.jsx)("p",{className:"text-center",children:"Click the user name to view his/her report for each date"}),Object(ee.jsxs)(Le.a,{bordered:!0,hover:!0,striped:!0,responsive:!0,children:[Object(ee.jsx)("thead",{children:Object(ee.jsxs)("tr",{children:[Object(ee.jsx)("th",{className:"text-center",children:"User"}),Object(ee.jsx)("th",{className:"text-center",children:"Total Time"}),Object(ee.jsx)("th",{className:"text-center",children:"Total Injury Noted"}),Object(ee.jsx)("th",{className:"text-center",children:"Total Policy Violation Noted"})]})}),Object(ee.jsx)("tbody",{children:e.data.map((function(e){return Object(ee.jsx)(Xe,{item:e},u())}))})]})]},u())}))})},Xe=function(e){var t=e.item,a=Object(c.useState)(!1),r=Object(j.a)(a,2),s=r[0],n=r[1];return Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsxs)("tr",{children:[Object(ee.jsx)("th",{style:{cursor:"pointer"},onClick:function(){return n(!s)},scope:"row",className:"text-center",onMouseDown:function(e){e.detail>1&&e.preventDefault()},children:Object(ee.jsx)("b",{children:t.user})}),Object(ee.jsx)("td",{className:"text-center",children:Object(ee.jsx)("b",{children:t.total.time})}),Object(ee.jsx)("td",{className:"text-center",children:Object(ee.jsx)("b",{children:t.total.injury_noted})}),Object(ee.jsx)("td",{className:"text-center",children:Object(ee.jsx)("b",{children:t.total.policy_violation_noted})})]}),s&&Object(ee.jsxs)(ee.Fragment,{children:[t.data.map((function(e){return Object(ee.jsxs)("tr",{children:[Object(ee.jsx)("td",{className:"text-center",colSpan:2,children:e.date}),Object(ee.jsx)("td",{className:"text-center",colSpan:2,children:e.time})]},u())})),Object(ee.jsxs)("tr",{children:[Object(ee.jsx)("td",{className:"text-center",colSpan:2,children:Object(ee.jsx)("b",{children:"Total"})}),Object(ee.jsx)("td",{className:"text-center",colSpan:2,children:t.total.time})]})]})]})},Ze=function(){var e=Object(d.c)((function(e){return e.timeLog}));return Object(ee.jsx)(J.a,{children:Object(ee.jsx)(V.a,{className:"mb-8",children:Object(ee.jsx)(q.a,{className:"mb-5 mb-xl-0",xl:"12",children:Object(ee.jsxs)(oe.a,{className:"shadow",children:[Object(ee.jsx)(we.a,{className:"border-0",children:Object(ee.jsx)("div",{className:"col",children:Object(ee.jsx)("h3",{className:"mb-0 text-center",children:"Report Result"})})}),Object(ee.jsx)("hr",{className:"my-0"}),Object(ee.jsx)(ie.a,{children:e.logReport.loading?Object(ee.jsx)("p",{className:"text-center",children:"Loading..."}):Object(ee.jsxs)(ee.Fragment,{children:[e.logReport.error&&Object(ee.jsx)("p",{className:"text-center",children:e.logReport.error}),Object.keys(e.logReport.data).length>0&&Object(ee.jsx)(Qe,{data:e.logReport.data})]})})]})})})})},$e=function(){var e=Object(d.c)((function(e){return e.auth}));return Object(ee.jsx)(ve,{children:Object(ee.jsx)(J.a,{className:"mt-5",fluid:!0,children:Object(ee.jsx)(V.a,{className:"mt-5",children:Object(ee.jsx)(q.a,{className:"mb-5 mb-xl-0",xl:"12",children:Object(ee.jsxs)(oe.a,{className:"shadow",children:[Object(ee.jsx)(we.a,{className:"border-0",children:Object(ee.jsx)(V.a,{className:"align-items-center",children:Object(ee.jsx)("div",{className:"col",children:Object(ee.jsxs)("h3",{className:"mb-0",children:[Object(ee.jsx)(H.b,{to:"/",children:"Go Back"})," \xbb Report"]})})})}),e.user.is_company_owner?Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)(qe,{}),Object(ee.jsx)(Ze,{})]}):Object(ee.jsx)("h4",{className:"text-center pb-4",style:{color:"red",fontWeight:"bold"},children:"You're not allowed in this page!"})]})})})})})},et=function(){return Object(ee.jsxs)(i.d,{children:[Object(ee.jsx)(at,{path:"/",exact:!0,component:We}),Object(ee.jsx)(at,{path:"/create-log",exact:!0,component:Ee}),Object(ee.jsx)(at,{path:"/report",exact:!0,component:$e}),Object(ee.jsx)(at,{path:"/log/update/:logId",exact:!0,component:_e}),Object(ee.jsx)(at,{path:"/users",exact:!0,component:Ce}),Object(ee.jsx)(at,{path:"/user/:userId",exact:!0,component:Ve}),Object(ee.jsx)(at,{path:"/edit-profile",exact:!0,component:Ae}),Object(ee.jsx)(tt,{exact:!0,path:"/login",component:me}),Object(ee.jsx)(tt,{exact:!0,path:"/register",component:xe}),Object(ee.jsx)(i.b,{exact:!0,path:"/logout",component:Je}),Object(ee.jsx)(i.b,{component:He})]})},tt=function(e){var t=e.component,a=Object(o.a)(e,["component"]),c=Object(d.c)((function(e){return e.auth}));return Object(ee.jsx)(i.b,Object(l.a)(Object(l.a)({},a),{},{render:function(e){return Object(ee.jsx)(ee.Fragment,{children:c.isAuthenticated?Object(ee.jsx)(i.a,{to:{pathname:"/",state:{from:e.location}}}):Object(ee.jsx)(t,Object(l.a)({},e))})}}))},at=function(e){var t=e.component,a=Object(o.a)(e,["component"]),c=Object(d.c)((function(e){return e.auth}));return Object(ee.jsx)(i.b,Object(l.a)(Object(l.a)({},a),{},{render:function(e){return Object(ee.jsx)(ee.Fragment,{children:c.isAuthenticated?Object(ee.jsx)(t,Object(l.a)({},e)):Object(ee.jsx)(i.a,{to:{pathname:"/login",state:{from:e.location}}})})}}))},ct=(a(87),function(){return Object(ee.jsx)(et,{})}),rt=a(19),st={users:[],usersLoading:!1};var nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Object(l.a)(Object(l.a)({},e),{},{users:t.payload});case D:return Object(l.a)(Object(l.a)({},e),{},{usersLoading:t.payload});default:return e}},lt={isAuthenticated:!!localStorage.getItem("timeLoggerUserToken"),loginErrors:{},registerErrors:{},loading:!1,user:{username:"",email:"",first_name:"",last_name:"",address:"",phone:"",city:"",country:"",postal_code:"",company:""},company:{loading:!1,data:[],error:""}};var ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(l.a)(Object(l.a)({},e),{},{isAuthenticated:!0,loginErrors:{},user:t.payload?t.payload:Object(l.a)({},e.user)});case m:return Object(l.a)(Object(l.a)({},e),{},{loginErrors:t.payload});case x:return Object(l.a)(Object(l.a)({},e),{},{isAuthenticated:!0,registerErrors:{}});case g:return Object(l.a)(Object(l.a)({},e),{},{registerErrors:t.payload});case y:return Object(l.a)(Object(l.a)({},e),{},{loading:t.payload});case f:return Object(l.a)(Object(l.a)({},e),{},{isAuthenticated:!1});case G:return Object(l.a)(Object(l.a)({},e),{},{company:Object(l.a)(Object(l.a)({},e.company),{},{loading:t.payload})});case W:return Object(l.a)(Object(l.a)({},e),{},{company:{data:t.payload,loading:!1,error:""}});case z:return Object(l.a)(Object(l.a)({},e),{},{company:{data:[],loading:!1,error:t.payload}});default:return e}},it={logs:[],logsLoadError:"",loading:!1,logSaved:!1,logSaveError:"",singleLog:{},singleLogLoadError:"",singleLogLoading:!1,logReport:{error:"",data:{},loading:!1}};var jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(l.a)(Object(l.a)({},e),{},{logs:t.payload});case v:return Object(l.a)(Object(l.a)({},e),{},{logsLoadError:t.payload.message?t.payload.message:""});case E:return Object(l.a)(Object(l.a)({},e),{},{loading:t.payload});case _:return Object(l.a)(Object(l.a)({},e),{},{logSaved:t.payload});case w:return Object(l.a)(Object(l.a)({},e),{},{logSaveError:t.payload.message?t.payload.message:""});case S:return Object(l.a)(Object(l.a)({},e),{},{singleLog:t.payload});case L:return Object(l.a)(Object(l.a)({},e),{},{singleLogLoadError:t.payload.detail?t.payload.detail:""});case U:return Object(l.a)(Object(l.a)({},e),{},{singleLogLoading:t.payload});case P:return Object(l.a)(Object(l.a)({},e),{},{logReport:Object(l.a)(Object(l.a)({},e.logReport),{},{loading:t.payload})});case R:return Object(l.a)(Object(l.a)({},e),{},{logReport:{loading:!1,error:"",data:t.payload}});case C:return Object(l.a)(Object(l.a)({},e),{},{logReport:{loading:!1,error:t.payload,data:{}}});default:return e}},dt={loading:!1,userPasswordUpdated:!1,passwordUpdateErrors:{},userProfileUpdated:!1,userProfileUpdateErrors:{},userProfileInformation:{}};var bt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(l.a)(Object(l.a)({},e),{},{userProfileInformation:t.payload});case k:return Object(l.a)(Object(l.a)({},e),{},{loading:t.payload});case M:return Object(l.a)(Object(l.a)({},e),{},{userPasswordUpdated:!0});case F:return Object(l.a)(Object(l.a)({},e),{},{passwordUpdateErrors:t.payload,userPasswordUpdated:!1});case A:return Object(l.a)(Object(l.a)({},e),{},{userProfileUpdated:!0,userProfileInformation:t.payload});case Y:return Object(l.a)(Object(l.a)({},e),{},{userProfileUpdated:!1,userProfileUpdateErrors:t.payload});default:return e}},ut=Object(rt.c)({auth:ot,timeLog:jt,admin:nt,userProfile:bt}),Ot=a(50),ht=[Object(rt.a)(Ot.a)];var pt=Object(rt.e)(ut,rt.d.apply(void 0,ht));a(88),a(89),a(90);localStorage.getItem("timeLoggerUserToken")&&pt.dispatch(B()),n.a.render(Object(ee.jsx)(d.a,{store:pt,children:Object(ee.jsx)(H.a,{children:Object(ee.jsx)(ct,{})})}),document.getElementById("root"))}},[[91,1,2]]]);
//# sourceMappingURL=main.4fc4e419.chunk.js.map